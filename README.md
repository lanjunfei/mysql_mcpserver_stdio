# MySQL MCP æœåŠ¡å™¨ç”Ÿæˆå™¨ï¼ˆæ”¯æŒ stdio + SSEï¼‰

æœ¬é¡¹ç›®ç”¨äº**æ‰¹é‡**ç”ŸæˆåŸºäº **MySQL** çš„ MCP æœåŠ¡å™¨è„šæœ¬ã€‚æ¯ä¸ªç”Ÿæˆçš„è„šæœ¬åŒæ—¶æ”¯æŒä¸¤ç§ä¼ è¾“æ–¹å¼ï¼š

* **stdio** â€“ é€šè¿‡æœ¬åœ°å­è¿›ç¨‹ / ç®¡é“è°ƒç”¨
* **SSE (HTTP)** â€“ é€šè¿‡ `/sse` ç«¯ç‚¹æä¾›è¿œç¨‹è®¿é—®ï¼ˆé€‚é… MCP Inspectorï¼‰

---

## å®‰è£…

```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# macOS / Linux / WSL
source .venv/bin/activate

pip install -r requirements.txt
```

---

## ä½¿ç”¨æµç¨‹

### 1ï¸âƒ£ å¯åŠ¨ç”Ÿæˆå™¨ç•Œé¢

```bash
python app.py
```

åœ¨æµè§ˆå™¨æ‰“å¼€ **http://127.0.0.1:5000**ï¼Œä¾æ¬¡å®Œæˆï¼š

1. è¾“å…¥ MySQL è¿æ¥ä¿¡æ¯ï¼ˆä¸»æœºã€ç«¯å£ã€ç”¨æˆ·ã€å¯†ç ã€æ•°æ®åº“ï¼‰ã€‚
2. æŒ‡å®šè¾“å‡ºæ–‡ä»¶åï¼ˆ**å¿…é¡»ä»¥ `.py` ç»“å°¾**ï¼Œå¦‚ `my_server.py`ï¼‰ã€‚
3. ç‚¹å‡» **ç”Ÿæˆ**ã€‚è„šæœ¬ä¼šè‡ªåŠ¨åŒ…å«ä¸€ä¸ª `check_database` å·¥å…·ç”¨äºå¿«é€Ÿè¿é€šæ€§æµ‹è¯•ã€‚

### 2ï¸âƒ£ æ·»åŠ è‡ªå®šä¹‰å·¥å…·

è¿›å…¥ **â€œæ–°å¢å·¥å…·å‡½æ•°â€** é¡µé¢ï¼Œä¸ºæ¯æ¡ SQL æŸ¥è¯¢å¡«å†™ï¼š

| å­—æ®µ | è¯´æ˜ |
|------|------|
| å·¥å…·å‡½æ•°å | ä½¿ç”¨ `snake_case` |
| å·¥å…·è¯´æ˜ | 1 è¡Œæè¿° |
| SQL è¯­å¥ | ä½¿ç”¨ `%s` å ä½ç¬¦ä¼ å‚ |
| è¾“å‡ºæ ¼å¼(å¯é€‰) | Python ä»£ç ç‰‡æ®µï¼Œç”¨ `content.append()` æ‹¼æ¥è¿”å›æ–‡æœ¬ |

ç¤ºä¾‹æ ¼å¼åŒ–ä»£ç ï¼š

```python
for row in rows:
    content.append(f"è®¾å¤‡è´¦å·: {row['username']}")
    content.append(f"IPv4: {row['user_ip4']}")
```

ä¿å­˜åè„šæœ¬ä¼šè‡ªåŠ¨æ’å…¥å·¥å…·å‡½æ•°ã€‚

### 3ï¸âƒ£ è¿è¡Œç”Ÿæˆçš„æœåŠ¡å™¨è„šæœ¬

| æ¨¡å¼ | å‘½ä»¤ | è®¿é—®åœ°å€ |
|------|------|----------|
| **stdio**ï¼ˆé»˜è®¤ï¼‰ | `python my_server.py` | â€“ |
| **SSE / HTTP**   | `python my_server.py --http` | `http://127.0.0.1:8000/sse` |

> ğŸ“Œ **æ³¨æ„**
> å½“å‰ `FastMCP.run()` é»˜è®¤ç›‘å¬ `0.0.0.0:8000`ã€‚
> è‹¥éœ€è‡ªå®šä¹‰ç«¯å£ï¼Œå¯åœ¨å¯åŠ¨å‰è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ï¼š
>
> ```bash
> # Windows
> set MCP_PORT=9110
> # Linux / macOS / WSL
> export MCP_PORT=9110
> python my_server.py --http
> ```

### 4ï¸âƒ£ ç”¨ MCP Inspector æµ‹è¯•

```bash
npx @modelcontextprotocol/inspector
```

* Transport é€‰æ‹© **SSE**
* URL å¡«å†™ **http://127.0.0.1:8000/sse**

è¿æ¥æˆåŠŸåï¼Œå³å¯åœ¨å·¦ä¾§çœ‹åˆ°è‡ªåŠ¨å‘ç°çš„å·¥å…·åˆ—è¡¨å¹¶è¿›è¡Œè°ƒç”¨ã€‚

---

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ app.py            # Flask GUI ç”Ÿæˆå™¨
â”œâ”€â”€ templates/        # Jinja2 + Bootstrap é¡µé¢
â”œâ”€â”€ static/           # å‰ç«¯é™æ€èµ„æº
â”œâ”€â”€ requirements.txt  # ä¾èµ–åˆ—è¡¨
â””â”€â”€ README.md         # ä½¿ç”¨è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

ç¥ä½ å¼€å‘é¡ºåˆ©ï¼Œå¿«é€Ÿæ‰¹é‡ç”Ÿæˆ MCP Serverï¼


